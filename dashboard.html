<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FLLProPlanner - Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --warning: #f8961e;
            --danger: #f72585;
            --text-light: #f8f9fa;
            --text-dark: #212529;
            --card-bg: rgba(255, 255, 255, 0.96);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');

        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: url('https://i.pinimg.com/originals/cc/ac/c1/ccacc179221916e3aa0deb1ed71ed3ef.png') no-repeat center center;
            background-size: cover;
            position: relative;
            padding: 15px;
            overflow-x: hidden;
        }

        body::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            color: var(--text-light);
        }

        .header h1 {
            font-size: 1.8rem;
            color: var(--text-light);
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .header p {
            font-size: 0.9rem;
            color: var(--text-light);
            opacity: 0.9;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .season-cards {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            width: 100%;
        }

        .season-card {
            width: 100%;
            max-width: 400px;
            height: 180px;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid rgba(255,255,255,0.3);
        }

        .season-card:active {
            transform: scale(0.98);
        }

        .season-card .card-bg {
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            transition: var(--transition);
        }

        .season-card .card-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 15px;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            color: white;
        }

        .season-card h2 {
            font-size: 1.5rem;
            margin-bottom: 5px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .season-card p {
            font-size: 0.85rem;
            opacity: 0.9;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-top: 5px;
            background-color: var(--success);
        }

        .badge.warning {
            background-color: var(--warning);
        }

        .badge.danger {
            background-color: var(--danger);
        }

        /* Filtros */
        .filters {
            width: 100%;
            margin: 0 auto 25px;
            background: var(--card-bg);
            padding: 20px 15px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: none;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.3);
        }

        .filters.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .filters h2 {
            text-align: center;
            margin-bottom: 15px;
            color: var(--primary);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .strategy-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .strategy-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: var(--transition);
            border-left: 4px solid var(--primary);
        }

        .strategy-card h3 {
            color: var(--primary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1rem;
        }

        .strategy-card p {
            color: var(--text-dark);
            margin-bottom: 12px;
            opacity: 0.8;
            font-size: 0.85rem;
        }

        .strategy-form {
            display: none;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #eee;
        }

        .strategy-form.active {
            display: block;
        }

        .btn {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background-color: var(--primary);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
            width: 100%;
            justify-content: center;
            margin-bottom: 8px;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-secondary {
            background-color: #6c757d;
        }

        .btn-bonus {
            background-color: var(--warning);
            margin-bottom: 15px;
        }

        .results {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid var(--success);
        }

        .results.active {
            display: block;
        }

        .results h3 {
            color: var(--success);
            margin-bottom: 12px;
            font-size: 1.2rem;
        }

        .mission-list {
            list-style: none;
            max-height: 300px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .mission-item {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
        }

        .mission-item:last-child {
            border-bottom: none;
        }

        .mission-points {
            font-weight: 600;
            color: var(--success);
        }

        .bonus-points {
            color: var(--warning);
            font-weight: bold;
        }

        .total-points {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 2px solid var(--success);
            font-size: 1rem;
            font-weight: 700;
            text-align: right;
            color: var(--primary);
        }

        /* Melhorias para telas muito pequenas */
        @media (max-width: 350px) {
            .header h1 {
                font-size: 1.5rem;
            }
            
            .season-card {
                height: 150px;
            }
            
            .season-card h2 {
                font-size: 1.3rem;
            }
        }

        /* Ajustes para tablets e telas maiores */
        @media (min-width: 768px) {
            body {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .header p {
                font-size: 1rem;
            }
            
            .season-cards {
                flex-direction: row;
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .season-card {
                width: 320px;
                height: 200px;
            }
            
            .filters {
                max-width: 700px;
                padding: 25px;
            }
            
            .btn {
                width: auto;
                padding: 10px 20px;
            }
        }

        /* Evitar zoom em inputs no iOS */
        @media screen and (-webkit-min-device-pixel-ratio:0) {
            input, select, textarea {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>FLLProPlanner</h1>
        <p>Gerador de estratégias para a First Lego League</p>
    </div>

    <div class="main-content">
        <div class="season-cards">
            <!-- Card SUBMERGED -->
            <div class="season-card" onclick="showFilters('submerged')">
                <div class="card-bg" style="background-image: url('https://i.ytimg.com/vi/xgbDVS7NZI4/maxresdefault.jpg?sqp=-oaymwEmCIAKENAF8quKqQMa8AEB-AH-CYAC0AWKAgwIABABGDAgVihyMA8=&rs=AOn4CLBnBAvJjp0nRpPbzecgLbgRraqOdA');">
                    <div class="card-content">
                        <h2>SUBMERGED</h2>
                        <p>Missões aquáticas/exploração oceânica</p>
                        <span class="badge">Temporada Atual</span>
                    </div>
                </div>
            </div>

            <!-- Card UNEARTHED -->
            <div class="season-card" onclick="showFilters('underth')">
                <div class="card-bg" style="background-image: url('https://up.yimg.com/ib/th/id/OIP.lnug_4cWRkVq5rMFChkgeQHaEK?pid=Api&rs=1&c=1&qlt=95&w=215&h=121');">
                    <div class="card-content">
                        <h2>UNEARTHED</h2>
                        <p>Tema a ser revelado em breve</p>
                        <span class="badge warning">Em Breve</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Filtros (aparecem quando uma temporada é selecionada) -->
        <div class="filters" id="filters">
            <h2 id="season-title"><i class="fas fa-water"></i> SUBMERGED</h2>
            
            <!-- Botão de Bônus -->
            <button class="btn btn-bonus" id="bonus-btn" onclick="toggleBonus()">
                <i class="fas fa-star"></i> Bônus Desativados
            </button>
            <input type="hidden" id="bonus-enabled" value="false">
            
            <div class="strategy-options">
                <!-- Máximo de Pontos -->
                <div class="strategy-card">
                    <h3><i class="fas fa-trophy"></i> Máximo de Pontos</h3>
                    <p>Mostra a pontuação máxima possível com todas as missões completas</p>
                    <button class="btn" onclick="selectStrategy('max')">Selecionar</button>
                    
                    <div class="strategy-form" id="max-form">
                        <button class="btn" onclick="generateMaxPoints()">Gerar Pontuação Máxima</button>
                    </div>
                </div>
            </div>
            
            <!-- Resultados -->
            <div class="results" id="results">
                <h3><i class="fas fa-chart-line"></i> Pontuação Máxima</h3>
                <ul class="mission-list" id="mission-list">
                    <!-- As missões serão inseridas aqui pelo JavaScript -->
                </ul>
                <div class="total-points">
                    Pontuação Total: <span id="total-points">0</span> pts
                    <span id="bonus-display" style="display: none;"> (+<span id="bonus-value">0</span> pts de bônus)</span>
                </div>
                <button class="btn" onclick="saveStrategy()"><i class="fas fa-save"></i> Salvar Estratégia</button>
                <button class="btn btn-secondary" onclick="resetStrategy()"><i class="fas fa-redo"></i> Nova Estratégia</button>
            </div>
        </div>
    </div>

    <script>
        // Tabela SEM bônus (valores base)
        const baseMissions = {
            submerged: [
                { id: 1, name: "M01 Berçário de Corais", points: 40 },
                { id: 2, name: "M02 Tubarão", points: 30 },
                { id: 3, name: "M03 Recife de Coral", points: 35 },
                { id: 4, name: "M04 Mergulhador", points: 40 },
                { id: 5, name: "M05 Peixe pescador", points: 30 },
                { id: 6, name: "M06 Levantamento do Mastro", points: 30 },
                { id: 7, name: "M07 Tesouro do Kraken", points: 20 },
                { id: 8, name: "M08 Habitat Artificial", points: 40 },
                { id: 9, name: "M09 Encontro inesperado", points: 30 },
                { id: 10, name: "M10 Envio do submersível", points: 40 },
                { id: 11, name: "M11 Detecção por sonar", points: 20 },
                { id: 12, name: "M12 Alimentem a Baleia", points: 50 },
                { id: 13, name: "M13 Mudança de Rotas de Navegação", points: 20 },
                { id: 14, name: "M14 Coleta de Amostra", points: 45 },
                { id: 15, name: "M15 Navio de pesquisa", points: 50 }
            ],
            underth: []
        };

        // Tabela COM bônus (valores já incluindo os bônus)
        const missionsWithBonus = {
            submerged: [
                { id: 1, name: "M01 Berçário de Corais", points: 50 },
                { id: 2, name: "M02 Tubarão", points: 30 },
                { id: 3, name: "M03 Recife de Coral", points: 35 },
                { id: 4, name: "M04 Mergulhador", points: 40 },
                { id: 5, name: "M05 Peixe pescador", points: 30 },
                { id: 6, name: "M06 Levantamento do Mastro", points: 30 },
                { id: 7, name: "M07 Tesouro do Kraken", points: 20 },
                { id: 8, name: "M08 Habitat Artificial", points: 40 },
                { id: 9, name: "M09 Encontro inesperado", points: 30 },
                { id: 10, name: "M10 Envio do submersível", points: 40 },
                { id: 11, name: "M11 Detecção por sonar", points: 30 },
                { id: 12, name: "M12 Alimentem a Baleia", points: 50 },
                { id: 13, name: "M13 Mudança de Rotas de Navegação", points: 20 },
                { id: 14, name: "M14 Coleta de Amostra", points: 55 },
                { id: 15, name: "M15 Navio de pesquisa", points: 50 }
            ],
            underth: []
        };

        let currentSeason = '';
        let currentStrategy = '';
        let generatedStrategy = [];
        let bonusEnabled = false;

        // Mostrar filtros quando uma temporada é selecionada
        function showFilters(season) {
            const filters = document.getElementById('filters');
            const title = document.getElementById('season-title');
            const icon = title.querySelector('i');
            
            icon.className = 'fas';
            
            if (season === 'submerged') {
                title.innerHTML = '<i class="fas fa-water"></i> SUBMERGED';
                currentSeason = 'submerged';
            } else if (season === 'underth') {
                title.innerHTML = '<i class="fas fa-mountain"></i> UNEARTHED';
                alert("Esta temporada ainda não está disponível. Fique atento para o lançamento!");
                return;
            }
            
            filters.classList.add('active');
            resetStrategy();
            
            // Rolagem suave para os filtros
            setTimeout(() => {
                filters.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }

        // Ativar/desativar bônus
        function toggleBonus() {
            bonusEnabled = !bonusEnabled;
            document.getElementById('bonus-enabled').value = bonusEnabled;
            const btn = document.getElementById('bonus-btn');
            
            if (bonusEnabled) {
                btn.innerHTML = '<i class="fas fa-star"></i> Bônus Ativados';
                btn.style.backgroundColor = '#f8961e';
            } else {
                btn.innerHTML = '<i class="fas fa-star"></i> Bônus Desativados';
                btn.style.backgroundColor = '';
            }
            
            // Recalcular se já tiver uma estratégia gerada
            if (generatedStrategy.length > 0) {
                generateMaxPoints();
            }
        }

        // Selecionar tipo de estratégia
        function selectStrategy(strategy) {
            document.querySelectorAll('.strategy-form').forEach(form => {
                form.classList.remove('active');
            });
            
            document.getElementById(strategy + '-form').classList.add('active');
            document.getElementById('results').classList.remove('active');
            currentStrategy = strategy;
        }

        // Gerar pontuação máxima (todas as missões)
        function generateMaxPoints() {
            if (!currentSeason) return;
            
            // Usa a tabela apropriada conforme os bônus estão ativados ou não
            const missionsToUse = bonusEnabled ? missionsWithBonus[currentSeason] : baseMissions[currentSeason];
            
            // Cria uma cópia das missões
            let allMissions = [...missionsToUse];
            
            displayResults(allMissions);
        }

        // Exibe os resultados na tela
        function displayResults(missions) {
            generatedStrategy = missions;
            const missionList = document.getElementById('mission-list');
            const totalPointsElement = document.getElementById('total-points');
            const bonusDisplay = document.getElementById('bonus-display');
            const bonusValue = document.getElementById('bonus-value');
            
            missionList.innerHTML = '';
            
            let totalPoints = 0;
            let totalBonus = 0;
            
            missions.forEach(mission => {
                const li = document.createElement('li');
                li.className = 'mission-item';
                
                // Encontra a missão correspondente na tabela base para calcular o bônus
                const baseMission = baseMissions[currentSeason].find(m => m.id === mission.id);
                const bonus = bonusEnabled ? mission.points - (baseMission ? baseMission.points : 0) : 0;
                
                li.innerHTML = `
                    <span>${mission.name}</span>
                    <span class="mission-points">${bonusEnabled && baseMission ? baseMission.points : mission.points} pts${bonus > 0 ? ` <span class="bonus-points">(+${bonus})</span>` : ''}</span>
                `;
                missionList.appendChild(li);
                
                totalPoints += mission.points;
                totalBonus += bonus;
            });
            
            // Mostrar bônus se aplicável
            if (bonusEnabled && totalBonus > 0) {
                bonusDisplay.style.display = 'inline';
                bonusValue.textContent = totalBonus;
            } else {
                bonusDisplay.style.display = 'none';
            }
            
            totalPointsElement.textContent = totalPoints;
            document.getElementById('results').classList.add('active');
            
            // Rolagem suave para os resultados
            setTimeout(() => {
                document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }

        // Salvar estratégia (simulado)
        function saveStrategy() {
            if (generatedStrategy.length === 0) return;
            
            const strategyName = prompt("Digite um nome para esta estratégia:");
            if (strategyName) {
                alert(`Estratégia "${strategyName}" salva com sucesso!`);
            }
        }

        // Reiniciar
        function resetStrategy() {
            document.querySelectorAll('.strategy-form').forEach(form => {
                form.classList.remove('active');
            });
            document.getElementById('results').classList.remove('active');
            currentStrategy = '';
            generatedStrategy = [];
            bonusEnabled = false;
            document.getElementById('bonus-enabled').value = 'false';
            document.getElementById('bonus-btn').innerHTML = '<i class="fas fa-star"></i> Bônus Desativados';
            document.getElementById('bonus-btn').style.backgroundColor = '';
        }
    </script>
</body>
</html>